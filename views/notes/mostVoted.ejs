<link rel="stylesheet" href="/css/mostVoted.css" />

<div class="mostvoted-wrapper">

  <h1 class="mostvoted-heading">Most Voted Notes</h1>

  <% if (notes.length === 0) { %>
    <p style="text-align: center; color: var(--muted); font-size: 1.1rem;">
      No notes have been upvoted yet.
    </p>
  <% } else { %>

  <div class="note-grid">
    <% notes.forEach(note => { %>

      <article class="card">

        <div class="card-top">
          <div>
            <h3 class="card-title"><%= note.title %></h3>
            <div class="card-sub"><%= note.subject?.name %> • <%= note.course %></div>
          </div>
        </div>

        <div class="card-body">
          <div style="display:flex; gap:8px; flex-wrap:wrap;">

            <div class="tag-upvote">
              <i class="fa-solid fa-thumbs-up"></i> <strong><%= note.upvotes.length %></strong>
            </div>

            <div class="tag-download">
              ⬇ <strong><%= note.downloadCount %></strong>
            </div>

            <div class="tag-date">
              <strong><%= note.createdAt?.toDateString() %></strong>
            </div>

          </div>
        </div>

        <div class="card-footer">
          <a href="/notes/<%= note._id %>" class="view-btn">View</a>

          <div class="badge">
            By <span style="color:var(--accent); margin-left:6px;"><%= note.uploadedBy?.username %></span>

            <% if (note.uploadedBy?.roles?.isModerator) { %>
              <img src="/images/blueCheckmark.svg" class="badge-icon" style="width: 20px;">
            <% } else if (note.uploadedBy?.roles?.isDev) { %>
              <img src="/images/icons8-checkmark.svg" class="badge-icon" style="width: 20px;">
            <% } else if (note.uploadedBy?.verification?.verified) { %>
              <span class="verified-tick">✔</span>
            <% } %>
          </div>
        </div>

      </article>

    <% }) %>
  </div>

  <% } %>

</div>
